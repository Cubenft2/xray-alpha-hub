project_id = "odncvfiuzliyohxrsigc"

[functions.zombiedog-agent]
verify_jwt = false

[functions.zombiedog-chat]
verify_jwt = false

[functions.populate-quotes-library]
verify_jwt = false

[functions.manual-price-sync]
verify_jwt = false

[[functions.manual-price-sync.cron]]
schedule = "0 * * * *"

[functions.generate-brief-claude]
verify_jwt = false

[functions.generate-brief-morning]
verify_jwt = false

[[functions.generate-brief-morning.cron]]
schedule = "0 11 * * *"

[functions.generate-brief-evening]
verify_jwt = false

[[functions.generate-brief-evening.cron]]
schedule = "0 23 * * *"

[functions.generate-sunday-special]
verify_jwt = false

[[functions.generate-sunday-special.cron]]
schedule = "0 1 * * 1"

[functions.populate-token-addresses]
verify_jwt = false

[functions.exchange-data-aggregator]
verify_jwt = false

[[functions.exchange-data-aggregator.cron]]
schedule = "*/15 * * * *"

[functions.enhance-ticker-data]
verify_jwt = true

[functions.news-fetch]
verify_jwt = false

[[functions.news-fetch.cron]]
schedule = "30 * * * *"

[functions.symbol-validation]
verify_jwt = false

[functions.coingecko-sync]
verify_jwt = true

[functions.exchange-sync]
verify_jwt = false

[[functions.exchange-sync.cron]]
schedule = "0 */6 * * *"

[functions.symbol-intelligence]
verify_jwt = true

[functions.polygon-sync]
verify_jwt = true

[functions.quotes]
verify_jwt = false

[functions.sync-ticker-mappings]
verify_jwt = false

[functions.map-polygon-tickers]
verify_jwt = false

[functions.polygon-rest-poller]
verify_jwt = false

[functions.polygon-stock-poller]
verify_jwt = false

[[functions.polygon-stock-poller.cron]]
schedule = "*/5 * * * *"

# DISABLED: polygon-indicators-refresh writes to wrong table (technical_indicators instead of token_cards)
# Technicals now synced via sync-token-cards-polygon directly to token_cards
[functions.polygon-indicators-refresh]
verify_jwt = false

# Prefetch company details for all stocks (bulk mode, 500 per run)
[functions.polygon-company-prefetch]
verify_jwt = false

[[functions.polygon-company-prefetch.cron]]
schedule = "0 */4 * * *"

[functions.auto-map-polygon-tickers]
verify_jwt = false

[[functions.auto-map-polygon-tickers.cron]]
schedule = "0 2 * * *"

[functions.price-poller]
verify_jwt = false

[[functions.price-poller.cron]]
schedule = "*/5 * * * *"

[functions.polygon-historical-data]
verify_jwt = false

[functions.polygon-technical-indicators]
verify_jwt = false

[functions.polygon-company-details]
verify_jwt = false

[functions.derivs]
verify_jwt = false

[functions.lunarcrush-social]
verify_jwt = false

[functions.lunarcrush-news]
verify_jwt = false

[functions.lunarcrush-universe]
verify_jwt = false

[functions.lunarcrush-coin-detail]
verify_jwt = false

[functions.backfill-crypto-history]
verify_jwt = true

[functions.coingecko-enrich]
verify_jwt = false

[functions.coingecko-logos]
verify_jwt = false

[functions.calculate-asset-sentiment]
verify_jwt = false

[functions.test-polygon-api]
verify_jwt = false

[functions.test-lunarcrush-api]
verify_jwt = false

[functions.generate-og-image]
verify_jwt = false

[functions.sync-stock-mappings]
verify_jwt = false

[functions.sync-crypto-mappings]
verify_jwt = false

[functions.coingecko-chart-data]
verify_jwt = false

[functions.polygon-crypto-prices]
verify_jwt = false

[functions.migrate-ticker-data]
verify_jwt = false

[functions.polygon-crypto-snapshot]
verify_jwt = false

[functions.polygon-stock-snapshot]
verify_jwt = false

[[functions.polygon-stock-snapshot.cron]]
schedule = "*/5 * * * *"

[functions.polygon-sparkline-data]
verify_jwt = false

[functions.fix-coingecko-mappings]
verify_jwt = false

# DISABLED: lunarcrush-sync writes to wrong table (crypto_snapshot instead of token_cards)
# Use sync-token-cards-lunarcrush instead which writes to token_cards
[functions.lunarcrush-sync]
verify_jwt = false

[functions.asset-details]
verify_jwt = false

[functions.warm-derivs-cache]
verify_jwt = false

[[functions.warm-derivs-cache.cron]]
schedule = "*/5 * * * *"

# DISABLED: warm-news-cache uses expensive Tavily API
# Replaced by sync-token-news-polygon which is FREE (unlimited)
[functions.warm-news-cache]
verify_jwt = false

# Sync Polygon news to token_cards (FREE - unlimited)
[functions.sync-token-news-polygon]
verify_jwt = false

[[functions.sync-token-news-polygon.cron]]
schedule = "*/15 * * * *"

[functions.massive-crypto-snapshot]
verify_jwt = false

[[functions.massive-crypto-snapshot.cron]]
schedule = "*/2 * * * *"

# DISABLED: massive-forex-snapshot writes to live_prices, not forex_cards
# Redundant with sync-forex-cards-polygon which writes to master forex_cards table
[functions.massive-forex-snapshot]
verify_jwt = false

[functions.massive-forex-sync]
verify_jwt = false

[[functions.massive-forex-sync.cron]]
schedule = "0 3 * * *"

[functions.market-data]
verify_jwt = false

[functions.polygon-raw-preview]
verify_jwt = false

# DISABLED: sync-polygon-crypto-reference writes to polygon_crypto_cards, not token_cards
# Token data now flows through sync-token-cards-polygon
[functions.sync-polygon-crypto-reference]
verify_jwt = false

# DISABLED: sync-polygon-crypto-snapshot writes to polygon_crypto_cards, not token_cards
# Token data now flows through sync-token-cards-polygon
[functions.sync-polygon-crypto-snapshot]
verify_jwt = false

# Sync technical indicators to token_cards from Polygon OHLCV (local calculation)
[functions.sync-polygon-crypto-technicals]
verify_jwt = false

[[functions.sync-polygon-crypto-technicals.cron]]
schedule = "*/3 * * * *"

# ============================================
# TOKEN CARDS SYNC FUNCTIONS
# ============================================

# Bootstrap token_cards from crypto_snapshot (run once manually)
[functions.bootstrap-token-cards]
verify_jwt = false

# Bootstrap Polygon tokens into token_cards (run once manually)
[functions.bootstrap-polygon-to-token-cards]
verify_jwt = false

# Sync token_cards from LunarCrush with smart matching (every 3 min to stay within 2000/day limit)
[functions.sync-token-cards-lunarcrush]
verify_jwt = false

[[functions.sync-token-cards-lunarcrush.cron]]
schedule = "*/3 * * * *"

# Sync token_cards prices from Polygon.io (tiered refresh)
[functions.sync-token-cards-polygon]
verify_jwt = false

[[functions.sync-token-cards-polygon.cron]]
schedule = "* * * * *"

# ============================================
# FOREX CARDS SYNC FUNCTIONS
# ============================================

# Bootstrap forex_cards from poly_fx_pairs (run once manually)
[functions.bootstrap-forex-cards]
verify_jwt = false

# Sync forex_cards prices from Polygon.io (every minute)
[functions.sync-forex-cards-polygon]
verify_jwt = false

[[functions.sync-forex-cards-polygon.cron]]
schedule = "* * * * *"

# Sync forex_cards technicals from Polygon historical data (every 15 minutes)
[functions.sync-forex-cards-technicals]
verify_jwt = false

[[functions.sync-forex-cards-technicals.cron]]
schedule = "*/15 * * * *"

# DISABLED: sync-token-cards-lunarcrush-enhanced uses 4 API calls per token
# News now handled by FREE sync-token-news-polygon (Polygon unlimited quota)
# AI summaries/posts/creators too expensive at 4 calls/token
[functions.sync-token-cards-lunarcrush-enhanced]
verify_jwt = false

# Sync CoinGecko IDs and contract addresses to token_cards
[functions.sync-token-cards-coingecko]
verify_jwt = false

[[functions.sync-token-cards-coingecko.cron]]
schedule = "0 2 * * *"

# Sync token metadata (descriptions, websites, socials) from CoinGecko
[functions.sync-token-cards-metadata]
verify_jwt = false

[[functions.sync-token-cards-metadata.cron]]
schedule = "0 6 * * *"

# Sync technical indicators for non-Polygon tokens via CoinGecko historical data
[functions.sync-token-cards-coingecko-technicals]
verify_jwt = false

[[functions.sync-token-cards-coingecko-technicals.cron]]
schedule = "0 5 * * *"

# Sync CoinGecko prices, market cap, supply, ATH/ATL to dedicated columns
# Runs every 10 minutes (within 500/day CoinGecko budget: ~144 calls/day)
[functions.sync-token-cards-coingecko-prices]
verify_jwt = false

[[functions.sync-token-cards-coingecko-prices.cron]]
schedule = "*/10 * * * *"

# Enrich contract addresses from CoinGecko cg_master.platforms (ZERO API cost - database only)
# Runs daily at 6 AM UTC - contracts rarely change
[functions.sync-token-cards-coingecko-contracts]
verify_jwt = false

[[functions.sync-token-cards-coingecko-contracts.cron]]
schedule = "0 6 * * *"

# ============================================
# STOCK CARDS SYNC FUNCTIONS
# ============================================

# Sync stock_cards from live_prices + company_details (every 2 minutes)
[functions.sync-stock-cards]
verify_jwt = false

[[functions.sync-stock-cards.cron]]
schedule = "*/2 * * * *"

# Sync 52-week high/low for stocks (daily at 7 AM UTC after market data settles)
[functions.sync-stock-cards-52week]
verify_jwt = false

[[functions.sync-stock-cards-52week.cron]]
schedule = "0 7 * * *"

# Sync technical indicators for stocks (every 5 minutes)
[functions.sync-stock-cards-technicals]
verify_jwt = false

[[functions.sync-stock-cards-technicals.cron]]
schedule = "*/5 * * * *"

# Sync stock news from Polygon (FREE - unlimited, every 15 minutes)
[functions.sync-stock-news-polygon]
verify_jwt = false

[[functions.sync-stock-news-polygon.cron]]
schedule = "*/15 * * * *"
